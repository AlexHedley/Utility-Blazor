@using System.IO;
@using System.Net;

@page "/html"

<h1>HTML</h1>

<div class="container">
    <div class="row">
        <textarea id="decoded" class="form-control" rows="5" @bind="decoded"></textarea>
    </div>
    <div class="row">
        <button id="btnEncode" name="btnEncode" class="btn btn-success float-right"
                @onclick="Encode">
            Encode
        </button>
    </div>
    <div class="row">
        <textarea id="encoded" class="form-control" rows="5" @bind="encoded"></textarea>
    </div>
    <div class="row">
        <button id="btnDecode" name="btnDecode" class="btn btn-success float-right"
                @onclick="Decode">
            Decode
        </button>
    </div>
    <div class="row">
        <div>@((MarkupString)encoded)</div>
    </div>
</div>

@code {

    string decoded;
    string encoded;

    protected override async Task OnInitializedAsync()
    {
        decoded = "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;";
        encoded = string.Empty;
    }

    private void Encode()
    {
        var writer = new StringWriter();
        WebUtility.HtmlDecode(decoded, writer);
        encoded = writer.ToString();
    }

    private void Decode()
    {
        decoded = WebUtility.HtmlEncode(encoded);
    }

}